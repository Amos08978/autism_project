{% extends "base.html" %}
{% block content %}
<h2 class="text-center mt-4">挑戰關卡：{{ stage }}</h2>

<div class="text-center">
    {% if image %}
        <img src="{{ url_for('static', filename=image.image_path) }}"
             alt="{{ stage }}" class="img-fluid" style="max-height:300px;">
    {% else %}
        <p>找不到圖片</p>
    {% endif %}
</div>

<div class="row justify-content-center mt-4">
    {% for choice in ["喜", "怒", "哀", "樂"] %}
    <div class="col-md-3 text-center mb-3">
        {% if image %}
            <form method="post" action="{{ url_for('finish_stage', stage=stage) }}">
                <!-- ✅ 傳送 image_id -->
                <input type="hidden" name="image_id" value="{{ image.id }}">
                <input type="hidden" name="child_choice" value="{{ choice }}">
                <button type="submit" class="btn btn-lg btn-primary w-100">
                    {{ choice }}
                </button>
          </form>
        {% else %}
            <p class="text-danger">⚠ 尚未設定圖片，請通知管理者後台新增圖片。</p>
        {% endif %}

    </div>
    {% endfor %}
</div>
<a href="{{ url_for('game_home') }}" class="btn btn-link mt-3">返回首頁</a>
{% endblock %}